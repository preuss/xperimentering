plugins {
	id 'java'
	id 'application'
	id 'io.freefair.lombok' version '6.0.0-m2' // You don't need manual dependencies.
}

group 'dk.xpreuss.xperimentering'
version '0.1.0-SNAPSHOT'

application {
	applicationDefaultJvmArgs = ["--add-opens", "--add-opens=java.base/jdk.internal.misc=ALL-UNNAMED"]
}

/**
 * 1st approach: Setting encoding during compilation in Java and Test classes
 */
compileJava.options.encoding = "UTF-8"
compileTestJava.options.encoding = "UTF-8"
javadoc.options.encoding = 'UTF-8'

/**
 * 2nd approach: Setting encoding during compilation in Java and Test classes
 *
tasks.withType(JavaCompile) {
	options.encoding = "UTF-8"
}
tasks.withType(Test) {
	systemProperty "file.encoding", "UTF-8"
}
tasks.withType(Javadoc) {
	options.encoding = 'UTF-8'
}
 */

repositories {
	mavenCentral()
}


mainClassName = "dk.xpreuss.xperimentering.Main"

dependencies {
	implementation 'io.reactivex.rxjava3:rxjava:3.0.13-RC4'
	implementation 'com.ibm.icu:icu4j:69.1'
	implementation 'net.time4j:time4j-base:5.8'
	implementation 'net.time4j:time4j-tzdata:5.0-2021a'
	implementation 'net.time4j:time4j-sqlxml:5.8'
	implementation 'net.time4j:time4j-ui:5.8'

//	compileOnly 'org.projectlombok:lombok:1.18.20'
//	annotationProcessor 'org.projectlombok:lombok:1.18.20'
//
//	testCompileOnly 'org.projectlombok:lombok:1.18.20'
//	testAnnotationProcessor 'org.projectlombok:lombok:1.18.20'

	testImplementation 'org.junit.jupiter:junit-jupiter:5.7.2'
	testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.2'
	testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.2'
//	testRuntimeOnly 'org.junit.platform:junit-platform-runner:1.7.2'
//	testImplementation 'org.junit.platform:junit-platform-commons:1.7.2'

	testImplementation 'org.testng:testng:7.4.0'

	testImplementation 'org.mockito:mockito-core:3.10.0'
	testImplementation 'org.mockito:mockito-junit-jupiter:3.10.0'
	testImplementation 'org.mockito:mockito-testng:0.4.4'

	testImplementation 'org.easymock:easymock:4.3'

	testImplementation 'org.hamcrest:hamcrest:2.2'
}

test {
	useJUnitPlatform()
}

println "GRADLE_OPTS: " + System.getenv("GRADLE_OPTS")
println "File encoding: " + System.getProperty("file.encoding")
println "file.encoding sys property = " + System.properties["file.encoding"]
println "GRADLE_OPTS env variable = " + System.getenv("GRADLE_OPTS")
println "JAVA_TOOL_OPTIONS env variable = " + System.getenv("JAVA_TOOL_OPTIONS")
println "UTF-8 test: â†“"

